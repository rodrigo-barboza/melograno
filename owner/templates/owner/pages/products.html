{% extends 'owner/layouts/base.html' %}
{% load static %}

{% block title %} Meus produtos {% endblock %}

{% block content %}

{% include 'owner/components/add-product-modal.html' %}

<link rel="stylesheet" type="text/css" href="{% static 'owner/css/products.css'%}"/>
<script src="https://unpkg.com/phosphor-icons"></script>

<header class="d-flex justify-content-between p-3">
    <h3 class="align-self-center">Meus produtos</h3>
    <button class="new-product" id="botao-add">
       Adicionar novo
    </button>
</header>

{% if page_obj %}
<div class="body-content">
    {% for plate in page_obj.object_list %}
    <div class="products">
        <h4 class="product-title">{{plate.name}}</h4>

        <p class="product-text-description">
            {{plate.description}}
        </p>
        <div class="product-footer">
            <h5 class="product-text-price" style="color: #00d22e">R$ {{plate.price}}</h5>
            <div class="product-tag">
                <h6>{{plate.category}}</h6>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
<div class="blank-space"></div>
<div>
    <div class="pagination below-navbar">
        <span class="step-links">
            {% if page_obj.has_previous %}
                <a class="page_link" href="?page=1">&laquo; Primeira</a>
                <a class="page_link" href="?page={{ page_obj.previous_page_number }}">Anterior</a>
            {% endif %}
        
            <span class="current">
                Página {{ page_obj.number }} de {{ page_obj.paginator.num_pages }}
            </span>
          
            {% if page_obj.has_next %}
                <a class="page_link" href="?page={{ page_obj.next_page_number }}">Próxima</a>
                <a class="page_link" href="?page={{ page_obj.paginator.num_pages }}">Última &raquo;</a>
            {% endif %}
        </span>
    </div>
</div>

{% else %}
<div class="body-content">
    <div class="empty_state">
        <p>Não há nada aqui!</p>
        <img src="{% static 'owner/images/empty-state.png' %}" alt="Vazio">
    </div>
</div>
{% endif %}

<script>
    var modal = document.querySelector(".modal-ex");
    var botao = document.querySelector("#botao-add");
    var fechar = document.querySelector("#fechar-modal");
    botao.addEventListener('click', function() {
        modal.style.display = 'flex'
    })

    fechar.addEventListener('click', function() {
        modal.style.display = 'none'
    })

    window.addEventListener('click', function(event) {
        if (event.target == modal) { // verifica se o clique ocorreu fora do modal
            modal.style.display = "none"; // fecha o modal
        }
});

</script>

{% endblock %}